# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤ –±–æ—Ç–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ë–æ—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –∫–∞–∂–¥—ã–π —á–∞—Å. –ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

## –í–∞—Ä–∏–∞–Ω—Ç 2: Cron –∑–∞–¥–∞—á–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cron –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏:

### 1. –°–æ–∑–¥–∞–π—Ç–µ cron –∑–∞–¥–∞—á—É

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–∞–∂–¥—ã–π —á–∞—Å
0 * * * * cd /path/to/vpn_bot && python cleanup_expired.py >> /var/log/vpn_bot_cleanup.log 2>&1

# –ò–ª–∏ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00
0 3 * * * cd /path/to/vpn_bot && python cleanup_expired.py >> /var/log/vpn_bot_cleanup.log 2>&1
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```bash
chmod +x cleanup_expired.py
```

## –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

### –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ (–∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã)
```
/cleanup - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–µ–∫—à–∏–µ –∫–æ–Ω—Ñ–∏–≥–∏
```

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
```bash
python cleanup_expired.py
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤:
- –ö–æ–Ω—Å–æ–ª—å –±–æ—Ç–∞ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
- –§–∞–π–ª `/var/log/vpn_bot_cleanup.log` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è cron)

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ –±–æ—Ç–∞:
```
/stats - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–≤–∫–ª—é—á–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤)
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ:

```python
# –í cleanup_expired.py –¥–æ–±–∞–≤—å—Ç–µ:
async def notify_admin(cleaned_count):
    bot = Bot(token="YOUR_BOT_TOKEN")
    await bot.send_message(
        chat_id=ADMIN_ID,
        text=f"üßπ –û—á–∏—â–µ–Ω–æ {cleaned_count} –∏—Å—Ç–µ–∫—à–∏—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤"
    )
``` 